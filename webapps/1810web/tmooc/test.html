<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Insert title here</title>
		<style type="text/css">
			html{
				height: 100%;
				width: 100%;
			}
			
			body{
				margin: 0;
				height: 100%;
				width: 100%;
			}
			
			#d1{
				height: 100%;
				width: 100%;
			}
			
			#d2{
				height: 100%;
				width: 100%;
				background: red;
				position:relative;
			}
			
			a{
				display: inline-block;
				position:absolute;
				right:17%;
				bottom:52%;
			}
		</style>
		
		<script type="text/javascript">
		/* 对Date的扩展，将 Date 转化为指定格式的String
		 * 月(M)、日(d)、12小时(h)、24小时(H)、分(m)、秒(s)、周(E)、季度(q)可以用 1-2 个占位符 
		 * 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字) 
		 * 例如: (new Date()).pattern("yyyy-MM-dd hh:mm:ss.S")==> 2006-07-02 08:09:04.423      
		 * (new Date()).pattern("yyyy-MM-dd E HH:mm:ss") ==> 2009-03-10 二 20:09:04      
		 * (new Date()).pattern("yyyy-MM-dd EE hh:mm:ss") ==> 2009-03-10 周二 08:09:04      
		 * (new Date()).pattern("yyyy-MM-dd EEE hh:mm:ss") ==> 2009-03-10 星期二 08:09:04      
		 * (new Date()).pattern("yyyy-M-d h:m:s.S") ==> 2006-7-2 8:9:4.18      
		 */        
		Date.prototype.pattern=function(fmt) {       
		    var o = {         
			    "M+" : this.getMonth()+1, //月份         
			    "d+" : this.getDate(), //日         
			    "h+" : this.getHours()%12 == 0 ? 12 : this.getHours()%12, //小时         
			    "H+" : this.getHours(), //小时         
			    "m+" : this.getMinutes(), //分         
			    "s+" : this.getSeconds(), //秒         
			    "q+" : Math.floor((this.getMonth()+3)/3), //季度        
			    "S"  : this.getMilliseconds() //毫秒         
		    };   
		    
		    var week = {         
			    "0" : '日',         
			    "1" : '一',         
			    "2" : '二',         
			    "3" : '三',         
			    "4" : '四',         
			    "5" : '五',         
			    "6" : '六'        
		    }; 
		    
		    if(/(y+)/.test(fmt)){         
		        fmt=fmt.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length));         
		    } 
		    
		    if(/(E+)/.test(fmt)){         
		        fmt=fmt.replace(RegExp.$1, ((RegExp.$1.length>1) ? (RegExp.$1.length>2 ? "星期" : "周") : "")+week[this.getDay()+""]);         
		    }
		    
		    for(var k in o){         
		        if(new RegExp("("+ k +")").test(fmt)){         
		            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));         
		        }         
		    }
		    
		    return fmt;         
		}
		 
		 // "url('../bg_imgs/timg (1).jpg')",
		var arr = [
					"url('../bg_imgs/timg (1).jpg')",
					"url('../bg_imgs/timg (10).jpg')",
					"url('../bg_imgs/timg (11).jpg')",
					"url('../bg_imgs/timg (12).jpg')",
					"url('../bg_imgs/timg (13).jpg')",
					"url('../bg_imgs/timg (14).jpg')",
					"url('../bg_imgs/timg (15).jpg')",
					"url('../bg_imgs/timg (16).jpg')",
					"url('../bg_imgs/timg (17).jpg')",
					"url('../bg_imgs/timg (18).jpg')",
					"url('../bg_imgs/timg (19).jpg')",
					"url('../bg_imgs/timg (2).jpg')",
					"url('../bg_imgs/timg (20).jpg')",
					"url('../bg_imgs/timg (21).jpg')",
					"url('../bg_imgs/timg (22).jpg')",
					"url('../bg_imgs/timg (23).jpg')",
					"url('../bg_imgs/timg (24).jpg')",
					"url('../bg_imgs/timg (25).jpg')",
					"url('../bg_imgs/timg (26).jpg')",
					"url('../bg_imgs/timg (27).jpg')",
					"url('../bg_imgs/timg (28).jpg')",
					"url('../bg_imgs/timg (29).jpg')",
					"url('../bg_imgs/timg (3).jpg')",
					"url('../bg_imgs/timg (30).jpg')",
					"url('../bg_imgs/timg (31).jpg')",
					"url('../bg_imgs/timg (32).jpg')",
					"url('../bg_imgs/timg (33).jpg')",
					"url('../bg_imgs/timg (34).jpg')",
					"url('../bg_imgs/timg (35).jpg')",
					"url('../bg_imgs/timg (4).jpg')",
					"url('../bg_imgs/timg (5).jpg')",
					"url('../bg_imgs/timg (6).jpg')",
					"url('../bg_imgs/timg (7).jpg')",
					"url('../bg_imgs/timg (8).jpg')",
					"url('../bg_imgs/timg (9).jpg')",
					"url('../bg_imgs/timg.jpg')"
				  ];
		var lastIndex = undefined;
		
		//获取一个随机数,不包括和当前一样的
		function getRandom(){
			if("undefined" == typeof lastIndex){
				lastIndex = parseInt(Math.random()*arr.length);
			}else{
				var newRan = undefined;
				while(true){
					newRan = parseInt(Math.random()*arr.length);
					if(newRan != lastIndex){
						lastIndex = newRan;
						break;
					}
				}
			}
			return lastIndex;
		}
		
		onload = function(){
			d2.style.backgroundImage = arr[getRandom()];
		}
		
		var timeInt = 0;
		var i = 0;
 		function fun1(){
 			timeInt=timeInt+1000;
 			var dateAndtime = new Date().pattern("yyyy-MM-dd EEE HH:mm:ss");
 			var date = dateAndtime.substring(0,10);
 			var week = dateAndtime.substring(11,14);
 			var time = dateAndtime.substring(15,23);
 			a.innerText = date + " " + week + " " + time;
 		/* 	d2.style.width = "800px";
 			d2.style.height = "250px";  */
 			/* d2.style.lineHeight = "250px";  */
 			/* d2.style.background = "#000"; */
 			d2.style.color = "#fff";
 			/* d2.style.textAlign = "center"; */
 			d2.style.fontSize = "100px";
 			d2.style.backgroundSize = "cover";

 			// 根据累计时间每60秒,就启动切换图片效果.先是每秒100次的渐变透明,结束后清除定时器.然后换图片(除了原来的图片),然后透明度继续从0到1.
 			if(timeInt%(1000*60)==0){
 				var changeBg = setInterval(
 						function(){
		 					i++;
		 					d2.style.opacity=""+1-0.01*i;//设定透明度
		 					if(i>=100){
		 						// 切换文字的位置和大小为随机
		 		 				/* a.style.fontSize = 100 + parseInt(Math.random()*100)+"px";
		 		 				a.style.left = parseInt(Math.random()*(screen.availWidth-getComputedStyle(a).width))+"px";
		 		 				a.style.top = parseInt(Math.random()*(screen.availHeight-getComputedStyle(a).height))+"px";
		 		 				 */
		 						// 完全透明后换另一张图,并将初始透明度设置为0
		 						i=0;
		 						d2.style.backgroundImage=arr[getRandom()];
		 						d2.style.opacity="0";
		 						// 然后设定定时器让其慢慢显示
		 						var changeBgt = setInterval(
		 		 						function(){
		 				 					i++;
		 				 					d2.style.opacity=0.01*i;//透明度
		 				 					if(i>=100){
		 				 						i=0;
		 				 						clearInterval(changeBgt);
		 			 						}
		 			 					},5);
		 						clearInterval(changeBg);
	 						}
	 					},5);
 			}
 		}
 		
		var t1 = window.setInterval(fun1,1000);
		
		//窗口失去焦点时候取消计时器
		onblur = function(){
			clearInterval(t1);
		}

		//获焦
		onfocus = function(){
			t1 = window.setInterval(fun1,1000);
		}
		</script>
	</head>
	
	<body>
		<div id="d1">
			<div id="d2">
				<a id="a"></a>
			</div>
		</div>
	</body>
</html>